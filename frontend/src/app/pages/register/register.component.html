<div class="container mx-auto mt-10 max-w-md">
    <h2 class="text-2xl font-bold mb-6 text-center">Register</h2>
  
    <form #registerForm="ngForm" (ngSubmit)="onSubmit()">
  
      <!-- username -->
      <div class="mb-4">
        <label for="reg-username" class="block text-gray-700 text-sm font-bold mb-2">Username</label>
        <input type="text" id="reg-username" name="reg-username" required [(ngModel)]="registerData.username" #usernameInput="ngModel"
               class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
               [class.border-red-500]="usernameInput.invalid && usernameInput.touched">
        <!-- basic validation message -->
         <div *ngIf="usernameInput.invalid && usernameInput.touched" class="text-red-500 text-xs italic mt-1">Username is required.</div>
      </div>
  
      <div class="mb-4">
        <label for="reg-email" class="block text-gray-700 text-sm font-bold mb-2">Email</label>
        <input type="email" id="reg-email" name="reg-email" required email [(ngModel)]="registerData.email" #emailInput="ngModel"
               class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
               [class.border-red-500]="emailInput.invalid && emailInput.touched">
         <div *ngIf="emailInput.invalid && emailInput.touched && emailInput.errors?.['required']" class="text-red-500 text-xs italic mt-1">Email is required.</div>
         <div *ngIf="emailInput.invalid && emailInput.touched && emailInput.errors?.['email']" class="text-red-500 text-xs italic mt-1">Please enter a valid email address.</div>
      </div>
  
      <div class="mb-4">
          <label for="reg-firstname" class="block text-gray-700 text-sm font-bold mb-2">First Name</label>
          <input type="text" id="reg-firstname" name="reg-firstname" required [(ngModel)]="registerData.first_name" #firstNameInput="ngModel"
                  class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                  [class.border-red-500]="firstNameInput.invalid && firstNameInput.touched">
          <div *ngIf="firstNameInput.invalid && firstNameInput.touched" class="text-red-500 text-xs italic mt-1">First name is required.</div>
      </div>
  
      <div class="mb-4">
          <label for="reg-lastname" class="block text-gray-700 text-sm font-bold mb-2">Last Name</label>
          <input type="text" id="reg-lastname" name="reg-lastname" required [(ngModel)]="registerData.last_name" #lastNameInput="ngModel"
                  class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                  [class.border-red-500]="lastNameInput.invalid && lastNameInput.touched">
           <div *ngIf="lastNameInput.invalid && lastNameInput.touched" class="text-red-500 text-xs italic mt-1">Last name is required.</div>
      </div>
  
      <div class="mb-4">
        <label for="reg-password" class="block text-gray-700 text-sm font-bold mb-2">Password</label>
        <input type="password" id="reg-password" name="reg-password" required minlength="8" [(ngModel)]="registerData.password" #passwordInput="ngModel"
               class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
               [class.border-red-500]="passwordInput.invalid && passwordInput.touched">
         <div *ngIf="passwordInput.invalid && passwordInput.touched && passwordInput.errors?.['required']" class="text-red-500 text-xs italic mt-1">Password is required.</div>
         <div *ngIf="passwordInput.invalid && passwordInput.touched && passwordInput.errors?.['minlength']" class="text-red-500 text-xs italic mt-1">Password must be at least 8 characters.</div>
      </div>
  
      <div class="mb-6">
        <label for="reg-password2" class="block text-gray-700 text-sm font-bold mb-2">Confirm Password</label>
        <input type="password" id="reg-password2" name="reg-password2" required [(ngModel)]="registerData.password2" #password2Input="ngModel"
               class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
               [class.border-red-500]="(password2Input.invalid || registerData.password !== registerData.password2) && password2Input.touched">
        <div *ngIf="password2Input.invalid && password2Input.touched && password2Input.errors?.['required']" class="text-red-500 text-xs italic mt-1">Please confirm your password.</div>
        <div *ngIf="registerData.password !== registerData.password2 && password2Input.touched" class="text-red-500 text-xs italic mt-1">Passwords do not match.</div>
      </div>
  
      <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
        <span class="block sm:inline">{{ errorMessage }}</span>
      </div>
  
       <div *ngIf="successMessage" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
         <span class="block sm:inline">{{ successMessage }}</span>
       </div>
  
      <div class="flex items-center justify-between">
        <button
          type="submit"
          [disabled]="registerForm.invalid || isLoading || registerData.password !== registerData.password2"
          class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed">
           <span *ngIf="!isLoading">Register</span>
           <span *ngIf="isLoading">Registering...</span>
        </button>
        <a routerLink="/login" class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800">
          Already have an account?
        </a>
      </div>
  
    </form>
  </div>